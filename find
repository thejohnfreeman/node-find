#!/usr/bin/env NODE_PATH=.:$NODE_PATH node

var find    = require('.')
var through = require('through2')

var argv = require('yargs')
.demand(1)
.usage('$0 [options] path [path...]\n\n'
  + 'All filters like name, path, and regex will be taken as a disjunction.')
.describe('max-depth', 'Limit depth of recursion.')
.alias('insensitive', 'i')
.describe('insensitive', 'Turn off case sensitivity.')
.describe('type', 'True if the file is of the given type.')
.describe('name',
  'True if given glob pattern matches the last component of the path.')
.describe('path',
  'True if given glob pattern matches the full path.'
  + ' Wildcards match directory separators.')
.describe('regex',
  'True if given regex matches the full path.')
.describe('prune.{name|path|regex}',
  'False if matches any component of the path.'
  + ' Used to avoid traversing branches of the tree.')
.help('help', 'Show this help and exit.')
.wrap(80)
.argv

var opts = argv
opts.paths = argv._
opts.expr = ['accept']

find(opts)
.pipe(through.obj(function(file, enc, done) {
  console.log(file.pppath())
  done()
}))

